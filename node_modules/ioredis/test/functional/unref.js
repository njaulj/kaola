'use strict';

describe('Redis#unref', function () {
  context('connected', function () {
    it('should call unref', function (done) {
      var redis = new Redis();
      redis.once('ready', function () {
        stub(redis.stream, 'unref', function () {
          redis.stream.unref.restore();
          redis.disconnect();
          done();
        });
        redis.unref();
      });
    });
  });

  context('unconnected', function () {
    it('should call unref', function (done) {
      var redis = new Redis();
      redis.unref();
      redis.once('connect', function () {
        stub(redis.stream, 'unref', function () {
          redis.stream.unref.restore();
          redis.disconnect();
          done();
        });
      });
    });
  });
});
